# v1.3.0 更新说明

## 🎯 核心改进

本次更新重点解决小白用户的使用痛点：**无需使用命令行工具** + **商业闭环**

### 新增功能

1. **📝 格式化笔记按钮**
   - 一键格式化所有笔记
   - 实时显示格式化进度
   - 完成后弹窗提示

2. **📎 迁移附件按钮**
   - 一键迁移所有附件
   - 附件复制到 `attachments/` 目录
   - 完成后弹窗提示

3. **💳 购买授权信息卡片**
   - 在授权面板显示购买信息
   - 显示价格：¥49.00 / 30天
   - 显示联系方式：微信和邮件
   - 浅蓝色背景卡片，视觉突出

### 界面变化

```
之前：
┌─────────────────────────────────┐
│  🚀 一键迁移                    │
└─────────────────────────────────┘
提示：运行命令 python3 tools/obsidian_formatter.py
❌ 没有购买入口

现在：
┌─────────────────────────────────┐
│  授权状态                        │
│  ⚠️ 未激活（免费额度: 8/10）     │
│  ┌───────────────────────────┐  │
│  │ 输入授权码                 │  │
│  └───────────────────────────┘  │
│  [激活]                         │
│  ┌───────────────────────────┐  │
│  │ 💳 购买授权                │  │  ← 新增！
│  │ ¥49.00 / 30天             │  │
│  │ 微信：WardLuDev           │  │
│  └───────────────────────────┘  │
├─────────────────────────────────┤
│  📥 下载笔记                    │
│  📝 格式化  │  📎 迁移附件      │  ← 新增！
└─────────────────────────────────┘
提示：点击按钮即可，无需命令行！
✅ GUI 内直接显示购买方式
```

### 文案优化

- 「🚀 一键迁移」→「📥 下载笔记」
  - 更准确：第一个按钮只负责下载
  - 更清晰：用户知道每个按钮的具体功能
- 「迁移进度」→「下载进度」
  - 与按钮文案保持一致
- 标题：「为知笔记 → Obsidian 一键迁移」→「为知笔记 → Obsidian 迁移工具」
  - 更专业的工具名称

---

## 🚀 完整使用流程（小白用户）

1. 启动应用：`./start.sh`
2. 输入为知笔记账号密码
3. 点击「📥 下载笔记」
4. 点击「📝 格式化笔记」
5. 点击「📎 迁移附件」
6. 点击「📂 打开目录」
7. 在 Obsidian 中打开 `~/wiznote_obsidian/`

**全程无需使用命令行！**

---

## 📊 技术实现

### 格式化和附件迁移按钮

- 使用 `subprocess.Popen` 后台执行
- 实时输出日志到 GUI
- 完善的错误处理
- 不阻塞 UI 主线程

### 购买授权信息卡片

- CustomTkinter Frame 组件
- 浅蓝色背景（`#e3f2fd` / `#1a2840`）
- 红色价格（`#ff6b6b`），醒目突出
- 紧凑布局，不影响整体界面

## 📊 商业化闭环

**用户流程**：
1. 下载应用 → 看到免费额度 8/10
2. 点击下载 → 用完 10 个免费额度
3. 查看购买信息 → 联系微信支付
4. 获得授权码 → 激活 → 继续下载

**关键改进**：
- ✅ GUI 内直接显示购买方式
- ✅ 不需要用户去外部找购买渠道
- ✅ 降低用户流失率

---

## 📝 相关文档

- `RELEASE_v1.3.0.md` - 详细版本发布文档
- `CHANGELOG.md` - 主仓库更新日志
- `app/CHANGELOG.md` - 子模块更新日志
