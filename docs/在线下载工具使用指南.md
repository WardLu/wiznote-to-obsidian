# åœ¨çº¿ä¸‹è½½å·¥å…·ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

`WizNote_Migration/wiz_to_obsidian.py` æ˜¯ä¸€ä¸ªåœ¨çº¿ä¸‹è½½å·¥å…·ï¼Œå¯ä»¥ç›´æ¥ä» WizNote äº‘ç«¯ä¸‹è½½ç¬”è®°å¹¶è½¬æ¢ä¸º Markdown æ ¼å¼ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸŒ **ç›´æ¥ç™»å½• WizNote äº‘ç«¯** - æ— éœ€æ‰‹åŠ¨å¯¼å‡º
- ğŸ“ **ä¿æŒæ–‡ä»¶å¤¹ç»“æ„** - å®Œæ•´ä¿ç•™åŸå§‹ç›®å½•
- ğŸ“ **HTML â†’ Markdown è½¬æ¢** - è‡ªåŠ¨è½¬æ¢æ ¼å¼
- ğŸ–¼ï¸ **å›¾ç‰‡ä¸‹è½½** - è‡ªåŠ¨ä¸‹è½½ç¬”è®°ä¸­çš„å›¾ç‰‡
- ğŸ”„ **é€’å½’æ‰«æ** - è‡ªåŠ¨å‘ç°æ‰€æœ‰æ–‡ä»¶å¤¹
- ğŸ’¾ **Fallback æ¨¡å¼** - å¤±è´¥æ—¶å°è¯•çº¯æ–‡æœ¬æå–

## å‰ç½®è¦æ±‚

### Python ä¾èµ–

```bash
pip3 install requests markdownify
```

### ç³»ç»Ÿè¦æ±‚

- Python 3.6+
- ç½‘ç»œè¿æ¥
- WizNote è´¦å·

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨

```bash
cd WizNote_Migration
python3 wiz_to_obsidian.py
```

è¿è¡Œåä¼šæç¤ºè¾“å…¥ï¼š
1. WizNote é‚®ç®±/è´¦å·
2. å¯†ç ï¼ˆéšè—è¾“å…¥ï¼‰

### è¾“å‡ºç¤ºä¾‹

```
=== WizNote to Obsidian Migration (v3.0 Recursive) ===
Email: your_email@example.com
Password: ********

Logging in as your_email@example.com...
Login successful!
KB GUID: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

Starting migration...

Scanning: /

  [Processing] ç¬”è®°æ ‡é¢˜1...
  [Processing] ç¬”è®°æ ‡é¢˜2...
  [Skip] ç¬”è®°æ ‡é¢˜3 (already exists)

Migration Complete!
Total Processed: 100
Successfully Saved: 95
Location: /path/to/obsidian_export
```

## è¾“å‡ºç»“æ„

```
obsidian_export/
â”œâ”€â”€ æ–‡ä»¶å¤¹1/
â”‚   â”œâ”€â”€ ç¬”è®°1.md
â”‚   â”œâ”€â”€ ç¬”è®°1_files/
â”‚   â”‚   â”œâ”€â”€ image1.png
â”‚   â”‚   â””â”€â”€ image2.jpg
â”‚   â””â”€â”€ ç¬”è®°2.md
â””â”€â”€ æ–‡ä»¶å¤¹2/
    â””â”€â”€ ç¬”è®°3.md
```

## å·¥ä½œåŸç†

### 1. ç™»å½•æµç¨‹

```python
# å·¥å…·ä¼šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
1. è¿æ¥åˆ° WizNote è´¦å·æœåŠ¡å™¨ (https://as.wiz.cn)
2. ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç ç™»å½•
3. è·å– token å’Œ kb_guid
4. è·å–çŸ¥è¯†åº“æœåŠ¡å™¨åœ°å€
```

### 2. æ‰«ææµç¨‹

```python
# å·¥å…·ä¼šé€’å½’æ‰«ææ‰€æœ‰æ–‡ä»¶å¤¹ï¼š
1. ä»æ ¹ç›®å½• "/" å¼€å§‹
2. åˆ—å‡ºå½“å‰æ–‡ä»¶å¤¹çš„æ‰€æœ‰ç¬”è®°
3. æŸ¥æ‰¾å­æ–‡ä»¶å¤¹
4. é€’å½’å¤„ç†æ¯ä¸ªå­æ–‡ä»¶å¤¹
5. é¿å…é‡å¤æ‰«æï¼ˆä½¿ç”¨ known_folders é›†åˆï¼‰
```

### 3. ä¸‹è½½æµç¨‹

```python
# å¯¹äºæ¯ä¸ªç¬”è®°ï¼š
1. ä¸‹è½½ ZIP æ ¼å¼çš„ç¬”è®°æ–‡ä»¶
2. è§£å‹åˆ°ä¸´æ—¶ç›®å½•
3. æå– index.html
4. è½¬æ¢ HTML â†’ Markdown
5. ç§»åŠ¨å›¾ç‰‡åˆ° {ç¬”è®°å}_files/ ç›®å½•
6. æ·»åŠ  YAML front matter
7. ä¿å­˜ä¸º .md æ–‡ä»¶
```

### 4. Fallback æ¨¡å¼

å¦‚æœ ZIP ä¸‹è½½å¤±è´¥ï¼Œå·¥å…·ä¼šå°è¯• Fallback æ¨¡å¼ï¼š

```python
# Fallback æ¨¡å¼ï¼š
1. å°è¯•è·å–ç¬”è®°çš„ HTML å†…å®¹
2. ç›´æ¥è½¬æ¢ HTML â†’ Markdown
3. æ·»åŠ è­¦å‘Šæç¤ºï¼šå›¾ç‰‡æœªä¸‹è½½
4. ä¿å­˜ä¸º .md æ–‡ä»¶
```

## é…ç½®é€‰é¡¹

### ä¿®æ”¹æœåŠ¡å™¨åœ°å€

å¦‚æœä½¿ç”¨ä¼ä¸šç‰ˆ WizNoteï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹æœåŠ¡å™¨åœ°å€ï¼š

```python
# åœ¨ wiz_to_obsidian.py ä¸­ä¿®æ”¹ï¼š
AS_URL = "https://as.wiz.cn"  # ä¸ªäººç‰ˆé»˜è®¤åœ°å€
# AS_URL = "https://your-company.wiz.cn"  # ä¼ä¸šç‰ˆåœ°å€
```

## å¸¸è§é—®é¢˜

### Q1: ç™»å½•å¤±è´¥ï¼Ÿ

**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç¡®è®¤ç”¨æˆ·åå’Œå¯†ç æ­£ç¡®
2. æ£€æŸ¥ç½‘ç»œè¿æ¥
3. ç¡®è®¤ WizNote æœåŠ¡å™¨åœ°å€
4. å¦‚æœä½¿ç”¨ä¼ä¸šç‰ˆï¼Œä¿®æ”¹ `AS_URL`

### Q2: ä¸‹è½½çš„ç¬”è®°ä¸­æ²¡æœ‰å›¾ç‰‡ï¼Ÿ

**A:** è¿™é€šå¸¸æ˜¯ç”±äºï¼š
1. ç¬”è®°ä½¿ç”¨äº† Fallback æ¨¡å¼ï¼ˆZIP ä¸‹è½½å¤±è´¥ï¼‰
2. å›¾ç‰‡æƒé™é—®é¢˜
3. ç½‘ç»œé—®é¢˜å¯¼è‡´å›¾ç‰‡ä¸‹è½½å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**
- æŸ¥çœ‹æ—¥å¿—ä¸­çš„è­¦å‘Šä¿¡æ¯
- å°è¯•åœ¨ WizNote å®¢æˆ·ç«¯ä¸­æ‰‹åŠ¨å¯¼å‡º
- ä½¿ç”¨ç¦»çº¿è¿ç§»å·¥å…·å¤„ç†å·²å¯¼å‡ºçš„æ–‡ä»¶

### Q3: æ‰«æä¸åˆ°ä»»ä½•ç¬”è®°ï¼Ÿ

**A:** å¯èƒ½çš„åŸå› ï¼š
1. è´¦å·æ²¡æœ‰ç¬”è®°
2. æ–‡ä»¶å¤¹ç»“æ„ç‰¹æ®Š
3. API æƒé™é—®é¢˜

**è§£å†³æ–¹æ¡ˆï¼š**
- ç¡®è®¤è´¦å·ä¸­æœ‰ç¬”è®°
- æ£€æŸ¥ WizNote å®¢æˆ·ç«¯èƒ½å¦æ­£å¸¸è®¿é—®
- æŸ¥çœ‹æ—¥å¿—ä¸­çš„è°ƒè¯•ä¿¡æ¯

### Q4: ä¸‹è½½é€Ÿåº¦æ…¢ï¼Ÿ

**A:** ä¼˜åŒ–å»ºè®®ï¼š
1. ä½¿ç”¨ç¨³å®šçš„ç½‘ç»œè¿æ¥
2. é¿å…é«˜å³°æ—¶æ®µ
3. åˆ†æ‰¹ä¸‹è½½ï¼ˆä¿®æ”¹ä»£ç é™åˆ¶æ–‡ä»¶å¤¹æ•°é‡ï¼‰

### Q5: å¦‚ä½•æ–­ç‚¹ç»­ä¼ ï¼Ÿ

**A:** å·¥å…·æ”¯æŒè·³è¿‡å·²å­˜åœ¨çš„æ–‡ä»¶ï¼š

```python
# å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œä¼šè·³è¿‡ä¸‹è½½ï¼š
if md_file_path.exists():
    print(f"  [Skip] {safe_title} (already exists)")
    return
```

**ä½¿ç”¨æ–¹æ³•ï¼š**
1. ç¬¬ä¸€æ¬¡è¿è¡Œä¸‹è½½éƒ¨åˆ†ç¬”è®°
2. ä¸­æ–­åé‡æ–°è¿è¡Œ
3. å·¥å…·ä¼šè‡ªåŠ¨è·³è¿‡å·²ä¸‹è½½çš„ç¬”è®°

## é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰è¾“å‡ºç›®å½•

```python
# åœ¨ wiz_to_obsidian.py ä¸­ä¿®æ”¹ï¼š
output_base = "/custom/path/to/obsidian_export"
```

### è¿‡æ»¤æ–‡ä»¶å¤¹

```python
# ä¿®æ”¹ scan_folder_recursive å‡½æ•°ï¼š
def scan_folder_recursive(self, folder, output_base):
    # æ·»åŠ è¿‡æ»¤æ¡ä»¶
    if folder.startswith('/Private'):
        return  # è·³è¿‡ç§äººæ–‡ä»¶å¤¹
```

### ä¿®æ”¹ Markdown è½¬æ¢é€‰é¡¹

```python
# ä¿®æ”¹ heading_style å‚æ•°ï¼š
md_content = md(html_content, heading_style="ATX")
# å¯é€‰å€¼ï¼šATX (# ## ###), SETEXT (underlined)
```

## æ•…éšœæ’é™¤

### æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

```bash
# è¿è¡Œæ—¶æ·»åŠ è¯¦ç»†è¾“å‡ºï¼š
python3 wiz_to_obsidian.py 2>&1 | tee download.log
```

### æ£€æŸ¥ä¸´æ—¶æ–‡ä»¶

```bash
# æŸ¥çœ‹ä¸´æ—¶è§£å‹ç›®å½•ï¼š
ls -la obsidian_export/**/_temp_*/
```

### æ¸…ç†ä¸´æ—¶æ–‡ä»¶

```bash
# åˆ é™¤æ‰€æœ‰ä¸´æ—¶ç›®å½•ï¼š
find obsidian_export -type d -name "_temp_*" -exec rm -rf {} +
```

## ä¸‹ä¸€æ­¥

ä¸‹è½½å®Œæˆåï¼Œä½¿ç”¨ç¦»çº¿è¿ç§»å·¥å…·è¿›ä¸€æ­¥ä¼˜åŒ–ï¼š

```bash
cd ../tools
python3 wiznote_to_obsidian.py --all
```

## æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ [å¸¸è§é—®é¢˜](../README.md#å¸¸è§é—®é¢˜)
2. æ£€æŸ¥ [docs/](../docs/) ä¸­çš„è¯¦ç»†æ–‡æ¡£
3. æäº¤ [GitHub Issue](https://github.com/WardLu/wiznote-to-obsidian/issues)
