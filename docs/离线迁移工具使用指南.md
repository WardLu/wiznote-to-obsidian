# ç¦»çº¿è¿ç§»å·¥å…·ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

`tools/wiznote_to_obsidian.py` æ˜¯ç¦»çº¿è¿ç§»å·¥å…·ï¼Œç”¨äºå¤„ç†å·²å¯¼å‡ºçš„ Markdown æ–‡ä»¶ï¼Œä¼˜åŒ–æ ¼å¼å¹¶é€‚é… Obsidianã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” **è¯­æ³•æ£€æŸ¥** - æ£€æµ‹ Markdown è¯­æ³•é—®é¢˜
- ğŸ”§ **æ ¼å¼ä¿®å¤** - è‡ªåŠ¨ä¿®å¤å¸¸è§é”™è¯¯
- ğŸ”— **é“¾æ¥è½¬æ¢** - Markdown â†’ WikiLinks
- ğŸ–¼ï¸ **å›¾ç‰‡ä¿®å¤** - ç»Ÿä¸€å›¾ç‰‡è·¯å¾„
- ğŸ“ **é™„ä»¶è¿ç§»** - è¿ç§» PDFã€XMind ç­‰é™„ä»¶
- ğŸ”— **é™„ä»¶é“¾æ¥** - è‡ªåŠ¨æ·»åŠ é™„ä»¶å¼•ç”¨
- âœ¨ **å…ƒæ•°æ®å¢å¼º** - æ·»åŠ  YAML front matter
- ğŸ“Š **è´¨é‡æŠ¥å‘Š** - ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š

## å‰ç½®è¦æ±‚

### ç³»ç»Ÿè¦æ±‚

- Python 3.6+
- å·²å¯¼å‡ºçš„ WizNote Markdown æ–‡ä»¶
- Obsidian Vault ç›®å½•

### ç›®å½•ç»“æ„

```
~/wiznote_export/          # WizNote å¯¼å‡ºç›®å½•
â”œâ”€â”€ æ–‡ä»¶å¤¹1/
â”‚   â”œâ”€â”€ ç¬”è®°1.md
â”‚   â””â”€â”€ ç¬”è®°2.md
â””â”€â”€ æ–‡ä»¶å¤¹2/
    â””â”€â”€ ç¬”è®°3.md

~/ObsidianVault/           # Obsidian Vault ç›®å½•
â””â”€â”€ 02_Areas/              # ç›®æ ‡ç›®å½•
```

## ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿå¼€å§‹

```bash
cd tools
python3 wiznote_to_obsidian.py --all
```

### è¯¦ç»†å‚æ•°

#### æŸ¥çœ‹å¸®åŠ©

```bash
python3 wiznote_to_obsidian.py --help
```

#### æ‰§è¡Œå®Œæ•´æµç¨‹

```bash
# æ‰§è¡Œæ‰€æœ‰æ­¥éª¤ï¼ˆä¸åŒ…æ‹¬é™„ä»¶è¿ç§»ï¼‰
python3 wiznote_to_obsidian.py --all

# åŒ…å«é™„ä»¶è¿ç§»çš„å®Œæ•´æµç¨‹
python3 wiznote_to_obsidian.py --all
python3 wiznote_to_obsidian.py --migrate-attachments
python3 wiznote_to_obsidian.py --link-attachments
```

#### å•ç‹¬æ‰§è¡Œå„ä¸ªæ­¥éª¤

```bash
# 1. æ£€æŸ¥è¯­æ³•
python3 wiznote_to_obsidian.py --check

# 2. ä¿®å¤æ ¼å¼
python3 wiznote_to_obsidian.py --fix

# 3. è½¬æ¢é“¾æ¥
python3 wiznote_to_obsidian.py --links

# 4. ä¿®å¤å›¾ç‰‡
python3 wiznote_to_obsidian.py --images

# 5. è¿ç§»é™„ä»¶
python3 wiznote_to_obsidian.py --migrate-attachments

# 6. æ·»åŠ é™„ä»¶é“¾æ¥
python3 wiznote_to_obsidian.py --link-attachments

# 7. ç”ŸæˆæŠ¥å‘Š
python3 wiznote_to_obsidian.py --report
```

#### å¹²è¿è¡Œæ¨¡å¼

```bash
# æ¨¡æ‹Ÿè¿è¡Œï¼Œä¸å®é™…ä¿®æ”¹æ–‡ä»¶
python3 wiznote_to_obsidian.py --fix --dry-run
python3 wiznote_to_obsidian.py --migrate-attachments --dry-run
python3 wiznote_to_obsidian.py --link-attachments --dry-run
```

## é…ç½®é€‰é¡¹

### æ–¹å¼ 1ï¼šç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰

```bash
export WIZNOTE_SOURCE_DIR=~/wiznote_export
export WIZNOTE_VAULT_DIR=~/ObsidianVault
export WIZNOTE_TARGET_DIR=~/ObsidianVault/02_Areas
export WIZNOTE_ATTACHMENTS_DIR=~/ObsidianVault/Wiznote/attachments
```

### æ–¹å¼ 2ï¼šé…ç½®æ–‡ä»¶

```bash
cd tools
cp config.example.json config.json
```

ç¼–è¾‘ `config.json`ï¼š

```json
{
  "source_dir": "/Users/username/wiznote_export",
  "vault_dir": "/Users/username/ObsidianVault",
  "target_dir": "/Users/username/ObsidianVault/02_Areas",
  "attachments_dir": "/Users/username/ObsidianVault/Wiznote/attachments"
}
```

ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼š

```bash
python3 wiznote_to_obsidian.py --config config.json --all
```

### æ–¹å¼ 3ï¼šé»˜è®¤è·¯å¾„

å¦‚æœä¸è®¾ç½®ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶ï¼Œå·¥å…·ä½¿ç”¨ä»¥ä¸‹é»˜è®¤è·¯å¾„ï¼š

- `source_dir`: `~/wiznote_export`
- `vault_dir`: `~/ObsidianVault`
- `target_dir`: `~/ObsidianVault/02_Areas`
- `attachments_dir`: `~/ObsidianVault/Wiznote/attachments`

## å„åŠŸèƒ½è¯¦è§£

### 1. è¯­æ³•æ£€æŸ¥ (--check)

æ£€æŸ¥ Markdown æ–‡ä»¶çš„è¯­æ³•é—®é¢˜ï¼š

```bash
python3 wiznote_to_obsidian.py --check
```

**æ£€æŸ¥é¡¹ç›®ï¼š**
- æ ‡é¢˜æ ¼å¼å’Œå±‚çº§
- åˆ—è¡¨æ ¼å¼
- ä»£ç å—
- ç²—ä½“æ–œä½“
- é“¾æ¥æ ¼å¼
- ç©ºè¡Œ

**è¾“å‡ºç¤ºä¾‹ï¼š**

```
ğŸ” æ£€æŸ¥ Markdown è¯­æ³•...

ğŸ“Š æ£€æŸ¥å®Œæˆï¼š
   - æ€»æ–‡ä»¶æ•°: 400
   - ğŸ”´ ERROR: 5
   - ğŸŸ¡ WARNING: 50
   - ğŸ”µ INFO: 200
```

### 2. æ ¼å¼ä¿®å¤ (--fix)

è‡ªåŠ¨ä¿®å¤ Markdown æ ¼å¼é—®é¢˜ï¼š

```bash
python3 wiznote_to_obsidian.py --fix
```

**è‡ªåŠ¨ä¿®å¤å†…å®¹ï¼š**
- æ ‡é¢˜å‰åç©ºæ ¼
- åˆ—è¡¨æ ‡è®°ç»Ÿä¸€ï¼ˆ* â†’ -ï¼‰
- å¤šä½™ç©ºè¡Œï¼ˆè¶…è¿‡ 2 ä¸ªï¼‰
- æ°´å¹³çº¿æ ¼å¼

**è¾“å‡ºç¤ºä¾‹ï¼š**

```
ğŸ”§ ä¿®å¤æ ¼å¼ (å®é™…ä¿®å¤)...

[1/400] âœ… /ç¬”è®°1.md
         ç¬¬ 10 è¡Œ: ä¿®å¤æ ‡é¢˜ç©ºæ ¼
         ç¬¬ 25 è¡Œ: ç»Ÿä¸€åˆ—è¡¨æ ‡è®°

ğŸ“Š ä¿®å¤å®Œæˆï¼š
   - å¤„ç†æ–‡ä»¶: 400
   - ä¿®å¤æ–‡ä»¶: 150
   - åº”ç”¨ä¿®å¤: 300
```

### 3. é“¾æ¥è½¬æ¢ (--links)

å°† Markdown é“¾æ¥è½¬æ¢ä¸º Obsidian WikiLinksï¼š

```bash
python3 wiznote_to_obsidian.py --links
```

**è½¬æ¢ç¤ºä¾‹ï¼š**

```markdown
# è½¬æ¢å‰
[ç¬”è®°å](./ç¬”è®°å.md)
[æ˜¾ç¤ºæ–‡æœ¬](./ç¬”è®°å.md)

# è½¬æ¢å
[[ç¬”è®°å]]
[[ç¬”è®°å|æ˜¾ç¤ºæ–‡æœ¬]]
```

**è¾“å‡ºç¤ºä¾‹ï¼š**

```
ğŸ”— è½¬æ¢é“¾æ¥ä¸º WikiLinks...

ğŸ“Š è½¬æ¢å®Œæˆï¼š
   - ä¿®æ”¹çš„æ–‡ä»¶: 120
```

### 4. å›¾ç‰‡ä¿®å¤ (--images)

ä¿®å¤å›¾ç‰‡è·¯å¾„ï¼Œç»Ÿä¸€å›¾ç‰‡ç®¡ç†ï¼š

```bash
python3 wiznote_to_obsidian.py --images
```

**ä¿®å¤å†…å®¹ï¼š**
- æŸ¥æ‰¾å¤±æ•ˆçš„å›¾ç‰‡é“¾æ¥
- åœ¨é™„ä»¶ç›®å½•ä¸­æŸ¥æ‰¾å›¾ç‰‡
- æ›´æ–°ä¸ºæ­£ç¡®çš„ç›¸å¯¹è·¯å¾„

**è¾“å‡ºç¤ºä¾‹ï¼š**

```
ğŸ–¼ï¸  ä¿®å¤å›¾ç‰‡è·¯å¾„...

ğŸ“Š ä¿®å¤å®Œæˆï¼š
   - å·²ä¿®å¤: 500
   - æœªæ‰¾åˆ°: 10
```

### 5. é™„ä»¶è¿ç§» (--migrate-attachments)

å°†é™„ä»¶ä»å¯¼å‡ºç›®å½•è¿ç§»åˆ° Obsidian Vaultï¼š

```bash
python3 wiznote_to_obsidian.py --migrate-attachments
```

**åŠŸèƒ½è¯´æ˜ï¼š**
- æ‰«ææ‰€æœ‰é™„ä»¶ç›®å½•
- å¤åˆ¶é™„ä»¶åˆ° Vault
- å¤„ç†åŒåæ–‡ä»¶
- ç”Ÿæˆé™„ä»¶æ¸…å•

**è¾“å‡ºç¤ºä¾‹ï¼š**

```
ğŸ“¦ è¿ç§»é™„ä»¶æ–‡ä»¶...
ğŸ” æ‰«æé™„ä»¶ç›®å½•...
ğŸ“¦ æ‰¾åˆ° 10 ä¸ªé™„ä»¶ç›®å½•
ğŸ“ ç›®æ ‡ç›®å½•: /Users/username/ObsidianVault/Wiznote/attachments
æ¨¡å¼: âœ… å®é™…è¿ç§»

ğŸ“‚ å¤„ç†ç›®å½•: attachments
  âœ… document.pdf (2.5 MB)
  âœ… mindmap.xmind (1.2 MB)
  âœ… data.xlsx (500.0 KB)

============================================================
ğŸ“Š è¿ç§»å®Œæˆç»Ÿè®¡
============================================================
é™„ä»¶ç›®å½•æ•°: 10
è¿ç§»æ–‡ä»¶æ•°: 50
æ€»å¤§å°: 70.5 MB

ğŸ“„ é™„ä»¶æ¸…å•: /Users/username/ObsidianVault/Wiznote/attachments/é™„ä»¶æ¸…å•.md
```

### 6. é™„ä»¶é“¾æ¥ (--link-attachments)

è‡ªåŠ¨ä¸ºç¬”è®°æ·»åŠ é™„ä»¶å¼•ç”¨ï¼š

```bash
python3 wiznote_to_obsidian.py --link-attachments
```

**åŠŸèƒ½è¯´æ˜ï¼š**
- æ ¹æ®æ–‡ä»¶ååŒ¹é…é™„ä»¶
- æŒ‰æ–‡ä»¶ç±»å‹åˆ†ç»„
- æ·»åŠ é™„ä»¶é“¾æ¥åŒºå—

**è¾“å‡ºç¤ºä¾‹ï¼š**

```
ğŸ”— ä¸ºç¬”è®°æ·»åŠ é™„ä»¶é“¾æ¥...
ğŸ” æ‰«æç¬”è®°æ–‡ä»¶...
ğŸ“ æ‰¾åˆ° 400 ä¸ªç¬”è®°æ–‡ä»¶
ğŸ“ é™„ä»¶ç›®å½•: /Users/username/ObsidianVault/Wiznote/attachments
æ¨¡å¼: âœ… å®é™…æ›´æ–°

  âœ… ç¬”è®°1.md: æ·»åŠ  2 ä¸ªé™„ä»¶é“¾æ¥
  âœ… ç¬”è®°2.md: æ·»åŠ  1 ä¸ªé™„ä»¶é“¾æ¥

============================================================
ğŸ“Š æ›´æ–°å®Œæˆç»Ÿè®¡
============================================================
æ‰«ææ–‡ä»¶æ•°: 400
æ›´æ–°æ–‡ä»¶æ•°: 50
æ·»åŠ é“¾æ¥æ•°: 80

ğŸ“‹ æ›´æ–°æ–‡ä»¶åˆ—è¡¨ï¼š
  - ç¬”è®°1.md: 2 ä¸ªé™„ä»¶
  - ç¬”è®°2.md: 1 ä¸ªé™„ä»¶
  ... è¿˜æœ‰ 48 ä¸ªæ–‡ä»¶

ğŸ’¾ å¤‡ä»½æ–‡ä»¶å·²ä¿å­˜ä¸º .attachlinkbak åç¼€
```

**æ·»åŠ çš„é™„ä»¶é“¾æ¥æ ¼å¼ï¼š**

```markdown
## ğŸ“ é™„ä»¶

### PDF æ–‡æ¡£
- [[Wiznote/attachments/document.pdf|æ–‡æ¡£]] (2.5 MB)

### æ€ç»´å¯¼å›¾
- [[Wiznote/attachments/mindmap.xmind|æ€ç»´å¯¼å›¾]] (1.2 MB)
```

### 7. ç”ŸæˆæŠ¥å‘Š (--report)

ç”Ÿæˆè¿ç§»ç»Ÿè®¡æŠ¥å‘Šï¼š

```bash
python3 wiznote_to_obsidian.py --report
```

**è¾“å‡ºç¤ºä¾‹ï¼š**

```
ğŸ“Š ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š...

============================================================
ğŸ“Š WizNote â†’ Obsidian è½¬æ¢æŠ¥å‘Š
============================================================

ğŸ“ Markdown æ–‡ä»¶: 400
ğŸ–¼ï¸  å›¾ç‰‡æ–‡ä»¶: 3000
ğŸ”— WikiLinks: 500
============================================================
```

## å®Œæ•´å·¥ä½œæµç¨‹

### æ¨èæµç¨‹

```bash
# 1. é…ç½®ç¯å¢ƒå˜é‡
export WIZNOTE_SOURCE_DIR=~/wiznote_export
export WIZNOTE_VAULT_DIR=~/ObsidianVault

# 2. æ‰§è¡Œå®Œæ•´è¿ç§»ï¼ˆä¸åŒ…æ‹¬é™„ä»¶ï¼‰
python3 wiznote_to_obsidian.py --all

# 3. è¿ç§»é™„ä»¶
python3 wiznote_to_obsidian.py --migrate-attachments

# 4. æ·»åŠ é™„ä»¶é“¾æ¥
python3 wiznote_to_obsidian.py --link-attachments

# 5. ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š
python3 wiznote_to_obsidian.py --report
```

### åˆ†æ­¥è°ƒè¯•æµç¨‹

```bash
# 1. å…ˆæ£€æŸ¥è¯­æ³•ï¼Œäº†è§£é—®é¢˜
python3 wiznote_to_obsidian.py --check > issues.txt

# 2. æŸ¥çœ‹é—®é¢˜åˆ—è¡¨
cat issues.txt

# 3. å¹²è¿è¡Œæ¨¡å¼ï¼Œé¢„è§ˆä¿®å¤
python3 wiznote_to_obsidian.py --fix --dry-run

# 4. ç¡®è®¤æ— è¯¯åï¼Œå®é™…ä¿®å¤
python3 wiznote_to_obsidian.py --fix

# 5. ç»§ç»­å…¶ä»–æ­¥éª¤...
```

## å¸¸è§é—®é¢˜

### Q1: æ‰¾ä¸åˆ°æ–‡ä»¶æˆ–ç›®å½•ï¼Ÿ

**A:** æ£€æŸ¥è·¯å¾„é…ç½®ï¼š
1. ç¡®è®¤ç¯å¢ƒå˜é‡è®¾ç½®æ­£ç¡®
2. ç¡®è®¤ç›®å½•å­˜åœ¨
3. æ£€æŸ¥æƒé™

### Q2: ä¿®å¤åæ ¼å¼è¿˜æ˜¯ä¸å¯¹ï¼Ÿ

**A:** å¯ä»¥å°è¯•ï¼š
1. ä½¿ç”¨ `tools/examples/` ä¸­çš„ä¸“ç”¨å·¥å…·
2. æ‰‹åŠ¨ä¿®å¤ç‰¹å®šé—®é¢˜
3. æäº¤ Issue å¯»æ±‚å¸®åŠ©

### Q3: é“¾æ¥è½¬æ¢åæ— æ³•æ‰“å¼€ï¼Ÿ

**A:** æ£€æŸ¥ï¼š
1. ç›®æ ‡æ–‡ä»¶æ˜¯å¦å­˜åœ¨
2. æ–‡ä»¶åç¼–ç æ˜¯å¦æ­£ç¡®
3. WikiLinks æ ¼å¼æ˜¯å¦æ­£ç¡®

### Q4: é™„ä»¶è¿ç§»å¤±è´¥ï¼Ÿ

**A:** æ£€æŸ¥ï¼š
1. å¯¼å‡ºç›®å½•ä¸­æ˜¯å¦æœ‰é™„ä»¶
2. é™„ä»¶ç›®å½•è·¯å¾„æ˜¯å¦æ­£ç¡®
3. ç£ç›˜ç©ºé—´æ˜¯å¦è¶³å¤Ÿ

### Q5: å¦‚ä½•å›æ»šä¿®æ”¹ï¼Ÿ

**A:** å·¥å…·ä¼šåˆ›å»ºå¤‡ä»½ï¼š
- é™„ä»¶é“¾æ¥ï¼š`.attachlinkbak` æ–‡ä»¶
- åŒæ­¥åˆ é™¤ï¼š`.sync_delete_trash/` ç›®å½•

## é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰ä¿®å¤è§„åˆ™

ä¿®æ”¹ `MarkdownFixer` ç±»ï¼š

```python
def fix_custom_rule(self):
    """è‡ªå®šä¹‰ä¿®å¤è§„åˆ™"""
    pattern = re.compile(r'your_pattern')
    for i, line in enumerate(self.fixed_lines):
        new_line = pattern.sub(r'replacement', line)
        if new_line != line:
            self.fixed_lines[i] = new_line
            self.fixes_applied.append(f'ç¬¬ {i+1} è¡Œ: è‡ªå®šä¹‰ä¿®å¤')
```

### è‡ªå®šä¹‰é“¾æ¥è½¬æ¢

ä¿®æ”¹ `LinkConverter.convert_file` æ–¹æ³•ï¼š

```python
def replace_link(match):
    # è‡ªå®šä¹‰é“¾æ¥è½¬æ¢é€»è¾‘
    text = match.group(1)
    path = match.group(2)
    # ä½ çš„è‡ªå®šä¹‰é€»è¾‘
    return f"[[{custom_path}|{text}]]"
```

## æ€§èƒ½ä¼˜åŒ–

### å¤„ç†å¤§é‡æ–‡ä»¶

```python
# é™åˆ¶å¤„ç†çš„æ–‡ä»¶æ•°é‡ï¼ˆåœ¨ wiznote_to_obsidian.py ä¸­ï¼‰
for i, file_path in enumerate(md_files[:100], 1):  # åªå¤„ç†å‰ 100 ä¸ª
```

### å¹¶è¡Œå¤„ç†

```bash
# ä½¿ç”¨ xargs å¹¶è¡Œå¤„ç†
find . -name "*.md" | xargs -P 4 -I {} python3 wiznote_to_obsidian.py --fix
```

## æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ [å¸¸è§é—®é¢˜](../README.md#å¸¸è§é—®é¢˜)
2. æ£€æŸ¥ [docs/](../docs/) ä¸­çš„è¯¦ç»†æ–‡æ¡£
3. æäº¤ [GitHub Issue](https://github.com/WardLu/wiznote-to-obsidian/issues)
