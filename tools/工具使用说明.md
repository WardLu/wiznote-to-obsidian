# WizNote to Obsidian 工具使用说明

> 一体化迁移工具，将 WizNote 导出的 Markdown 文件完整迁移到 Obsidian

## 📋 目录

- [快速开始](#快速开始)
- [功能概述](#功能概述)
- [详细使用](#详细使用)
- [配置说明](#配置说明)
- [常见问题](#常见问题)

---

## 🚀 快速开始

### 安装依赖

```bash
# 确保已安装 Python 3.6+
python3 --version

# 无需额外依赖，使用标准库
```

### 基础使用

```bash
# 进入工具目录
cd /path/to/Wiznote\ to\ Obisidian/tools

# 执行完整迁移流程
python3 wiznote_to_obsidian.py --all
```

### 查看帮助

```bash
python3 wiznote_to_obsidian.py --help
```

---

## 🎯 功能概述

### 核心功能

| 功能 | 命令 | 说明 |
|------|------|------|
| **语法检查** | `--check` | 检查 Markdown 语法问题 |
| **格式修复** | `--fix` | 修复标题、列表、代码块等格式问题 |
| **链接转换** | `--links` | 将 Markdown 链接转换为 WikiLinks |
| **图片修复** | `--images` | 修复图片路径，统一到 attachments 目录 |
| **生成报告** | `--report` | 生成详细的统计报告 |
| **完整流程** | `--all` | 执行所有步骤（推荐） |

### 修复的问题类型

✅ **标题格式**
- 标题后缺少空格：`###标题` → `### 标题`
- 标题层级跳跃检测

✅ **列表格式**
- 统一无序列表标记：`*` → `-`
- 检测列表格式问题

✅ **代码块**
- 检测未指定语言的代码块
- 建议使用 fenced code blocks

✅ **链接**
- Markdown 链接 → WikiLinks：`[text](file.md)` → `[[file]]`
- 支持自定义显示文本：`[[file|显示文本]]`

✅ **图片路径**
- 修复相对路径问题
- 统一到 `attachments/` 目录

---

## 📖 详细使用

### 1. 语法检查

```bash
python3 wiznote_to_obsidian.py --check
```

**输出示例：**
```
🔍 检查 Markdown 语法...

📊 检查完成：
   - 总文件数: 229
   - 🔴 ERROR: 3
   - 🟡 WARNING: 45
   - 🔵 INFO: 120
```

### 2. 格式修复

```bash
# 实际修复
python3 wiznote_to_obsidian.py --fix

# 模拟运行（不实际修改文件）
python3 wiznote_to_obsidian.py --fix --dry-run
```

**修复内容：**
- 标题前后空格
- 无序列表标记统一
- 多余空行清理
- 水平线前后空行

### 3. 链接转换

```bash
python3 wiznote_to_obsidian.py --links
```

**转换规则：**
- `[文本](文件.md)` → `[[文件]]` （文本与文件名相同）
- `[文本](文件.md)` → `[[文件|文本]]` （文本与文件名不同）

### 4. 图片路径修复

```bash
python3 wiznote_to_obsidian.py --images
```

**修复逻辑：**
1. 查找所有图片引用：`![](/Wiznote/attachments/images/...)`
2. 在 `attachments/` 目录中搜索图片
3. 更新为正确的相对路径

### 5. 生成报告

```bash
python3 wiznote_to_obsidian.py --report
```

**报告内容：**
- 文件总数
- 图片总数和占用空间
- WikiLinks 数量
- 文件分类统计

### 6. 完整流程

```bash
# 执行所有步骤
python3 wiznote_to_obsidian.py --all
```

**执行顺序：**
1. 检查语法 → 2. 修复格式 → 3. 转换链接 → 4. 修复图片 → 5. 生成报告

---

## ⚙️ 配置说明

### 创建配置文件

复制示例配置文件：

```bash
cp config.example.json config.json
```

### 编辑配置文件

```json
{
  "source_dir": "/path/to/wiznote/export",
  "vault_dir": "/path/to/obsidian/vault",
  "target_dir": "/path/to/obsidian/vault/02_Areas",
  "attachments_dir": "/path/to/obsidian/vault/Wiznote/attachments"
}
```

### 使用自定义配置

```bash
python3 wiznote_to_obsidian.py --config config.json --all
```

---

## 🔧 高级用法

### 只处理特定文件类型

```bash
# 只处理包含"产品"的文件
python3 wiznote_to_obsidian.py --fix --pattern "*产品*.md"
```

### 批量处理多个目录

```bash
# 创建脚本处理多个目录
for dir in "02_Areas" "03_Resources"; do
    python3 wiznote_to_obsidian.py \
        --target-dir "/path/to/vault/$dir" \
        --fix
done
```

### 验证修复结果

```bash
# 1. 修复前检查
python3 wiznote_to_obsidian.py --check

# 2. 执行修复
python3 wiznote_to_obsidian.py --fix

# 3. 修复后验证
python3 wiznote_to_obsidian.py --check
```

---

## ❓ 常见问题

### Q1: 工具会修改原始文件吗？

**A:** 会。工具会直接修改文件。建议：
- 使用 Git 管理你的 Obsidian Vault
- 在执行前提交当前状态
- 使用 `--dry-run` 参数预览修改

### Q2: 如何回滚修改？

**A:** 如果使用 Git：
```bash
# 查看修改内容
git diff

# 回滚所有修改
git checkout -- .

# 回滚单个文件
git checkout -- path/to/file.md
```

### Q3: 修复后仍然有问题？

**A:** 某些问题需要手动修复：
- 标题层级跳跃（需要判断内容逻辑）
- 未闭合的 `**` 标记（需要人工判断位置）
- 代码块语言指定（需要识别代码类型）

### Q4: 支持哪些 Markdown 扩展语法？

**A:** 工具支持 Obsidian 特有的：
- WikiLinks：`[[link]]`
- 标签：`#tag`
- 元数据：YAML front matter
- Callouts：`> [!TIP]`
- 高亮：`==text==`

### Q5: 能处理其他笔记软件导出的文件吗？

**A:** 可以。工具不限于 WizNote，支持任何标准 Markdown 文件。

### Q6: 处理大量文件会很慢吗？

**A:** 性能：
- 100 个文件：约 10-20 秒
- 500 个文件：约 1-2 分钟
- 1000 个文件：约 3-5 分钟

---

## 📊 最佳实践

### 推荐工作流

1. **备份原始数据**
   ```bash
   # 创建备份
   cp -r obsidian_export obsidian_export.bak
   ```

2. **使用 Git 版本控制**
   ```bash
   cd /path/to/obsidian/vault
   git init
   git add .
   git commit -m "迁移前备份"
   ```

3. **分步骤执行**
   ```bash
   # 先检查
   python3 wiznote_to_obsidian.py --check > report.txt

   # 再修复
   python3 wiznote_to_obsidian.py --fix

   # 验证结果
   python3 wiznote_to_obsidian.py --check
   ```

4. **在 Obsidian 中验证**
   - 打开修复后的文件
   - 检查图片是否正常显示
   - 验证链接是否可点击

5. **提交修改**
   ```bash
   git add .
   git commit -m "修复 Markdown 格式"
   ```

### 持续维护

```bash
# 定期运行检查
python3 wiznote_to_obsidian.py --check

# 定期修复格式
python3 wiznote_to_obsidian.py --fix

# 定期生成报告
python3 wiznote_to_obsidian.py --report
```

---

## 🆘 获取帮助

### 问题反馈

如果遇到问题：
1. 查看本使用说明
2. 检查 [常见问题](#常见问题)
3. 查看 GitHub Issues

### 功能建议

欢迎提出建议和改进意见！

---

**最后更新**：2026-02-02
**版本**：v1.0
**维护者**：Ward
